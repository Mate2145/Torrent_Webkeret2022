<div class="head">
    <mat-card>
        <h1>Downloads</h1>
    </mat-card>
</div>

<mat-accordion class="mat-acc">
    <mat-expansion-panel *ngFor="let item of items|async" class="mat-acc" (opened)="refreshCommentExpand($event,item.propertyId)">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{item.name}}
          </mat-panel-title>
          <mat-panel-description>
            {{item.size}}  
            {{item.metric}}
            | Uploaded:
            {{item.username}}
            <mat-icon>description</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-tab-group (selectedTabChange)="refreshComment($event,item.propertyId)" dynamicHeight [selectedIndex]="tabindex">
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon class="example-tab-icon">description</mat-icon>
              Részletek
            </ng-template>
            <p>--nMate--</p>
            <p>Leírás:</p>
            <p>Neve: {{item.name}}</p>
            <p>Nagysága: {{item.size}} {{item.metric}}</p>
            <p>Feltöltötte: {{item.username}}</p>
            <br/>
            <a mat-raised-button color="warn" href="{{item.link}}" target="_blank">DOWNLOAD</a>
          </mat-tab>

          <ng-container *ngIf="(comments | async) === null">
            Loading tabs...
          </ng-container>
        
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon class="example-tab-icon">comment</mat-icon>
              Kommentek
            </ng-template>
              <table>
                <tr *ngFor="let item of comments|async">
                    {{item.comment}} | {{item.date.toDate() | date:'shortDate'}} | {{item.username}}
                </tr>
              </table>
              <br/>
              <a mat-raised-button color="warn" (click)="openDialog(item.propertyId)" target="_blank">NEW COMMENT</a>
          </mat-tab>
        </mat-tab-group>
        
      </mat-expansion-panel>
</mat-accordion>





